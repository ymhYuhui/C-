# 四 方法(下)(C#图解教程第五章读书笔记)

## 5. 参数

参数是允许，方法返回多个值和将数据传入方法时的特殊变量。

### 5.1 形参

形参声明在方法的参数列表中，而不是在方法体中

    public void PrintSum(int x, float y )//形参声明
    {
        ....
    }

+ 因为形参是变量，所以他们有类型和名称，并能被写入和读取
+ 和其他局部变量不同，参数在方法体的外面定义并在方法开始之前初始化（输出参数例外）
+ 参数列表中可以有任意数量的形参声明需要用逗号隔开。

### 5.2 实参

+ 实参位于方法调用的参数列表中。
+ 每一个实参必须与对应形参的类型相匹配，或是编译器必须能够把实参隐式转换为那个类型，

    PrintSum(5,someInt)
    {

    }

当方法被调用的时候，每个实参的值都被用于初始化相应的形参，方法体随后被执行。

### 6. 值参数

当使用值参数时，通过将实参的值复制到形参的方式把数据传递给方法。方法被调用时，系统执行如下操作。
+ 在栈中为形参分配空间。
+ 将实参的值赋值给形参。

        float func1(float val)
        {
            float j = 2.6f;
            float k = 5.1f;
        }

        float fValue1 = func1(k);
        float fValue2 = func1(k+j);

用作实参之前，变量必须被赋值（除非时输出参数），对于引用类型，变量可以被设置为一个实际的引用或null

### 7. 引用参数

+ 使用引用参数时，必须在方法的声明和调用中都使用ref修饰符
+ 实参必须是变量，必须被赋值。如果时引用类型变量，可以赋值为一个引用或null

      void MyMethod(ref int val)//方法声明
      {...}

        int y = 1;              //实参变量
        MyMethod(ref y);        //方法调用

        MyMethod(ref 3 + 5 );   //出错了，必须使用变量

对于值参数，系统在栈上为形参分配内存，相反，引用参数具有如下特征
+ 不会在栈上为形参分配内存。
+ 形参的参数名将作为实参变量的别名，指向相同的内存位置。

由于形参名和实参名指向相同的内存位置，所以在方法的执行过程中对形参做的任何改变在方法完成后依然可见。

*要在方法的声明和调用上都是用ref关键字*

### 8. 引用类型作为值参数和引用参数

+ 将引用类型对象作为值参数传递  如果在方法内创建一个新对象并赋值给形参，将切断型参与实参之间的关联，并且在方法调用结束后，新对象也将不复存在。
  
+ 将引用类型对象作为引用参数传递  如果在方法内创建一个新对象并赋值给形参，在方法结束后该对象依然存在，并且是实参所引用的值

### 9. 输出参数

输出参数应用于从方法体内把数据传出到调用代码，它们的行为与引用参数类似，如同引用参数，输出参数有以下要求：

+ 必须在生命和调用中都使用修饰符。输出参数的修饰符是out而不是ref
+ 和引用参数类似，实参必须是变量，而不能是其它类型的表达式。

        void  MyMethod(out int val)// 方法声明
        {...}

        ...
        int y=1;                   //实参变量
        Mymethod(out y);           //方法调用
  
与引用参数类似，输出参数的形参充当实参的别名。形参设实参都是同一块内存位置的名称。显然在方法内对形参做的任何改变在方法执行完成之后(通过实参变量)都是可见的。

与引用参数不同，输出参数有以下要求：

+ 在方法内部，给输出参数赋值之后才能读取它。这意味着参数的初始值是无关的，而且没有必要在方法调用之前为实参赋值。
+ 在方法内部，在方法返回之前，代码中每条可能的路径都必须为所有输出参数赋值。

如果方法中有任何执行路径试图在方法给输出参数赋值之前读取他的值，编译器就会产生一条错误消息。

### 10. 参数数组

参数数组允许特定类型的零个或多个实参对应一个特定的形参。

+ 在一个参数列表中只能有一个参数数组
+ 如果有它必须是列表中的最后一个
+ 有参数数组表示的所有参数必须是同一类型

声明一个参数数组时必须做的事如下：

+ 在数据类型前使用params修饰符
+ 在数据类型后放置一组空的方括号

        void ListInt(params int[] inVals)

        listInts(10,20,30);
        listInts(intArray);



